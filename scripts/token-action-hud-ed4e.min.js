const e={ID:"token-action-hud-ed4e"},t={ID:"token-action-hud-core"},a="1.4",n={ability:"DND5E.Ability",check:"tokenActionHud.dnd5e.check",condition:"tokenActionHud.dnd5e.condition",effect:"DND5E.Effect",feature:"ITEM.TypeFeat",item:"tokenActionHud.dnd5e.item",save:"DND5E.ActionSave",skill:"tokenActionHud.dnd5e.skill",spell:"ITEM.TypeSpell",utility:"DND5E.ActionUtil"},o={bonus:"fas fa-plus",crew:"fas fa-users",day:"fas fa-hourglass-end",hour:"fas fa-hourglass-half",lair:"fas fa-home",minute:"fas fa-hourglass-start",legendary:"fas fas fa-dragon",reaction:"fas fa-bolt",special:"fas fa-star"},s="fas fa-circle-c",i="fas fa-sun",l="fas fa-circle-r",r={.5:"fas fa-adjust",1:"fas fa-check",2:"fas fa-check-double"},c={attributes:{id:"attributes",name:"earthdawn.a.attributes",type:"system"}};let g=null;Hooks.once("tokenActionHudCoreApiReady",(async t=>{g=class Utils{static getSetting(a,n=null){let o=n??null;try{o=game.settings.get(e.ID,a)}catch{t.api.Logger.debug(`Setting '${a}' not found`)}return o}static async setSetting(a,n){try{n=await game.settings.set(e.ID,a,n),t.api.Logger.debug(`Setting '${a}' set to '${n}'`)}catch{t.api.Logger.debug(`Setting '${a}' not found`)}}}}));let h=null;Hooks.once("tokenActionHudCoreApiReady",(async e=>{h=class ActionHandler extends e.api.ActionHandler{i18n=game.i18n;actors=null;tokens=null;actorType=null;items=null;showGeneral=null;showFavorites=null;showTalents=null;showSkills=null;showMatrices=null;showInventory=null;showStatusToggle=null;showCombat=null;async buildSystemActions(t){if(this.actors=this.actor?[this.actor]:this.#e(),this.tokens=this.token?[this.token]:this.#t(),this.actorType=this.actor?.type,this.actor){let t=this.actor.items;t=e.api.Utils.sortItemsByName(t),this.items=t}this.showGeneral=g.getSetting("showGeneral"),this.showFavorites=g.getSetting("showFavorites"),this.showTalents=g.getSetting("showTalents"),this.showSkills=g.getSetting("showSkills"),this.showMatrices=g.getSetting("showMatrices"),this.showInventory=g.getSetting("showInventory"),this.showStatusToggle=g.getSetting("showStatusToggle"),this.showCombat=g.getSetting("showCombat"),this.actor&&await this.#a()}async#a(){this.#n()}#n(){this.actor.type;let e=["earthdawn.d.dexterity","earthdawn.s.strength","earthdawn.t.toughness","earthdawn.p.perception","earthdawn.w.willpower","earthdawn.c.charisma"].map((e=>({id:null,name:this.i18n.localize(e),encodedValue:["attribute",this.token.id,e].join(this.delimiter),tooltip:this.i18n.format("tokenActionHud.ed4e.tooltips.attributeTest",{attribute:this.i18n.localize(e)})}))).filter((e=>!!e));this.addActions(e,{id:"attributes",type:"system"})}#e(){const e=["pc","npc","creature"],t=canvas.tokens.controlled.filter((e=>e.actor)).map((e=>e.actor));return t.every((t=>e.includes(t.type)))?t:[]}#t(){const e=["pc","npc","creature"],t=canvas.tokens.controlled;return t.filter((e=>e.actor)).map((e=>e.actor)).every((t=>e.includes(t.type)))?t:[]}}}));let d=null;Hooks.once("tokenActionHudCoreApiReady",(async e=>{const t=c;Object.values(t).forEach((t=>{t.name=e.api.Utils.i18n(t.name),t.listName=`Group: ${e.api.Utils.i18n(t.name)}`}));const a=Object.values(t);d={layout:[{nestId:"general",id:"general",name:e.api.Utils.i18n("tokenActionHud.ed4e.general"),groups:[{...t.attributes,nestId:"general_attributes"}]}],groups:a}}));let u=null;function register(t){game.settings.register(e.ID,"showGeneral",{name:"Show General",hint:"Display category for general rolls like Attributes, Half-Magic or Recovery",scope:"client",config:!0,type:Boolean,default:!0,onChange:e=>{t(e)}}),game.settings.register(e.ID,"showFavorites",{name:"Show Favorites",hint:"Display category for items marked as favorites",scope:"client",config:!0,type:Boolean,default:!0,onChange:e=>{t(e)}}),game.settings.register(e.ID,"showTalents",{name:"Show Talents",hint:"Display category for all talents",scope:"client",config:!0,type:Boolean,default:!0,onChange:e=>{t(e)}}),game.settings.register(e.ID,"showSkills",{name:"Show Skills",hint:"Display category for all skills",scope:"client",config:!0,type:Boolean,default:!0,onChange:e=>{t(e)}}),game.settings.register(e.ID,"showMatrices",{name:"Show Matrices",hint:"Display category for all spell matrices",scope:"client",config:!0,type:Boolean,default:!0,onChange:e=>{t(e)}}),game.settings.register(e.ID,"showInventory",{name:"Show Inventory",hint:"Display category for weapons and equipment",scope:"client",config:!0,type:Boolean,default:!0,onChange:e=>{t(e)}}),game.settings.register(e.ID,"showStatusToggle",{name:"Show Status Toggle",hint:"Display category for toggling system use and conditions",scope:"client",config:!0,type:Boolean,default:!0,onChange:e=>{t(e)}}),game.settings.register(e.ID,"showCombat",{name:"Show Combat",hint:"Display category for combat (Weapons, Matrices, Favorites, etc.",scope:"client",config:!0,type:Boolean,default:!0,onChange:e=>{t(e)}})}Hooks.once("tokenActionHudCoreApiReady",(async e=>{u=class RollHandler extends e.api.RollHandler{async doHandleActionEvent(e,t){console.log('TOKEN ACTION HUD: WE"RE HANDLING AN EVENT! IN THEORY... I MEAN... IT WORKS UP UNTIL HERE')}}}));let y=null;Hooks.once("tokenActionHudCoreApiReady",(async e=>{y=class SystemManager extends e.api.SystemManager{doGetCategoryManager(t){return new e.api.CategoryManager}doGetActionHandler(e){return new h(e)}getAvailableRollHandlers(){return{core:"Core Earthdawn 4th Edition"}}doGetRollHandler(e){let t;return t=new u,t}doRegisterSettings(e){register(e)}async doRegisterDefaultFlags(){return d}}})),Hooks.on("tokenActionHudCoreApiReady",(async()=>{const t=game.modules.get(e.ID);t.api={requiredCoreModuleVersion:"1.4",SystemManager:y},Hooks.call("tokenActionHudSystemReady",t)}));export{n as ACTION_TYPE,o as ACTIVATION_TYPE_ICON,h as ActionHandler,s as CONCENTRATION_ICON,t as CORE_MODULE,d as DEFAULTS,c as GROUP,e as MODULE,i as PREPARED_ICON,r as PROFICIENCY_LEVEL_ICON,a as REQUIRED_CORE_MODULE_VERSION,l as RITUAL_ICON,u as RollHandler,y as SystemManager,g as Utils,register};
//# sourceMappingURL=token-action-hud-ed4e.min.js.map
